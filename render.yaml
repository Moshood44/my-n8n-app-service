# This is the "blueprint" file for Render.com
# It tells Render how to build your n8n app and its database for free.

services:
  # 1. The n8n Web Service (Free Tier)
  - type: web
    name: n8n
    env: docker
    dockerfilePath: ./Dockerfile
    plan: free # This is the "sleeps after 15 mins" free plan
    
    # Environment variables n8n needs to connect to the database
    envVars:
      - key: DB_TYPE
        value: postgresdb
      - key: DB_POSTGRESDB_DATABASE
        fromDatabase:
          name: n8n-database # Must match the 'name' of the database below
          property: database
      - key: DB_POSTGRESDB_HOST
        fromDatabase:
          name: n8n-database
          property: host
      - key: DB_POSTGRESDB_USER
        fromDatabase:
          name: n8n-database
          property: user
      - key: DB_POSTGRESDB_PASSWORD
        fromDatabase:
          name: n8n-database
          property: password
    
    healthCheckPath: /healthz

# 2. The PostgreSQL Database (Free Tier)
# This is NOT part of 'services'. It is its own top-level key.
databases:
  - name: n8n-database # This name is referenced by the 'fromDatabase' key above
    plan: free
#```eof

---

### 2. The `Dockerfile` file



With **both** of these files in your GitHub repository, the "Blueprint" system on Render will successfully build both your n8n app and its free database. My apologies for the confusion.
